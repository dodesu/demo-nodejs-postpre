<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Result</title>
    <link rel="stylesheet" href="/assets/css/style.css" />
</head>

<body>
    <% const {data, meta}=result; const books=data; %>
        <header>
            <div class="search-box">
                <input type="text" id="basic-search" placeholder="Tìm sách...">
            </div>
            <div class="search-actions">
                <button id="toggle-advanced">Search Advanced ▾</button>
            </div>
            <div class="auth-buttons">
                <button>Login</button>
                <button>Logout</button>
            </div>
        </header>

        <div id="advanced-search" class="advanced-search hidden">
            <form id="filter-form">
                <div>
                    <label for="author">Tác giả:</label>
                    <input type="text" id="author" name="author">
                </div>
                <div>
                    <label for="genre">Thể loại:</label>
                    <input type="text" id="genre" name="genre">
                </div>
                <div>
                    <label for="published-from">Từ ngày:</label>
                    <input type="date" id="published-from" name="publishedFrom">
                </div>
                <div>
                    <label for="published-to">Đến ngày:</label>
                    <input type="date" id="published-to" name="publishedTo">
                </div>
                <button type="submit">Lọc</button>
            </form>
        </div>

        <h3>Tìm thấy <%= meta.total %> sách</h3>

        <% if (meta.total !==0) { %>
            <table class="responsive-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Title</th>
                        <th>Published</th>
                        <th>Created At</th>
                        <th>Author</th>
                        <th>Genres</th>
                        <th>Creator</th>
                        <th>Is Read</th>
                    </tr>
                </thead>
                <tbody id="books-table">
                    <% books.forEach(book=> { %>
                        <tr>
                            <td>
                                <%= book.id %>
                            </td>
                            <td>
                                <%= book.title %>
                            </td>
                            <td>
                                <%= new Date(book.publishedAt).toLocaleDateString() %>
                            </td>
                            <td>
                                <%= new Date(book.createdAt).toLocaleDateString() %>
                            </td>
                            <td>
                                <%= book.author.name %>
                            </td>
                            <td>
                                <%= book.genres.map((g)=> g.name).join(', ') %>
                            </td>
                            <td>
                                <%= book.creator.name %>
                            </td>
                            <td>
                                <input type="checkbox" checked>
                            </td>
                        </tr>
                        <% }) %>
                </tbody>
            </table>
            <% } %>

                <script src="/assets/js/result.js"></script>
</body>

</html>